<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />

<meta name="viewport" content="width=device-width, initial-scale=1" />

<meta name="author" content="Richard Hooijmaijers" />

<meta name="date" content="2023-09-22" />

<title>Introduction to the R3port package</title>

<script>// Pandoc 2.9 adds attributes on both header and div. We remove the former (to
// be compatible with the behavior of Pandoc < 2.8).
document.addEventListener('DOMContentLoaded', function(e) {
  var hs = document.querySelectorAll("div.section[class*='level'] > :first-child");
  var i, h, a;
  for (i = 0; i < hs.length; i++) {
    h = hs[i];
    if (!/^h[1-6]$/i.test(h.tagName)) continue;  // it should be a header h1-h6
    a = h.attributes;
    while (a.length > 0) h.removeAttribute(a[0].name);
  }
});
</script>

<style type="text/css">
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
span.underline{text-decoration: underline;}
div.column{display: inline-block; vertical-align: top; width: 50%;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
</style>



<style type="text/css">
code {
white-space: pre;
}
.sourceCode {
overflow: visible;
}
</style>
<style type="text/css" data-origin="pandoc">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
{ counter-reset: source-line 0; }
pre.numberSource code > span
{ position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
{ content: counter(source-line);
position: relative; left: -1em; text-align: right; vertical-align: baseline;
border: none; display: inline-block;
-webkit-touch-callout: none; -webkit-user-select: none;
-khtml-user-select: none; -moz-user-select: none;
-ms-user-select: none; user-select: none;
padding: 0 4px; width: 4em;
color: #aaaaaa;
}
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa; padding-left: 4px; }
div.sourceCode
{ }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } 
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.at { color: #7d9029; } 
code span.bn { color: #40a070; } 
code span.bu { color: #008000; } 
code span.cf { color: #007020; font-weight: bold; } 
code span.ch { color: #4070a0; } 
code span.cn { color: #880000; } 
code span.co { color: #60a0b0; font-style: italic; } 
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.do { color: #ba2121; font-style: italic; } 
code span.dt { color: #902000; } 
code span.dv { color: #40a070; } 
code span.er { color: #ff0000; font-weight: bold; } 
code span.ex { } 
code span.fl { color: #40a070; } 
code span.fu { color: #06287e; } 
code span.im { color: #008000; font-weight: bold; } 
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.kw { color: #007020; font-weight: bold; } 
code span.op { color: #666666; } 
code span.ot { color: #007020; } 
code span.pp { color: #bc7a00; } 
code span.sc { color: #4070a0; } 
code span.ss { color: #bb6688; } 
code span.st { color: #4070a0; } 
code span.va { color: #19177c; } 
code span.vs { color: #4070a0; } 
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } 
</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    var j = 0;
    while (j < rules.length) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") {
        j++;
        continue;
      }
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') {
        j++;
        continue;
      }
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>




<style type="text/css">body {
background-color: #fff;
margin: 1em auto;
max-width: 700px;
overflow: visible;
padding-left: 2em;
padding-right: 2em;
font-family: "Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;
font-size: 14px;
line-height: 1.35;
}
#TOC {
clear: both;
margin: 0 0 10px 10px;
padding: 4px;
width: 400px;
border: 1px solid #CCCCCC;
border-radius: 5px;
background-color: #f6f6f6;
font-size: 13px;
line-height: 1.3;
}
#TOC .toctitle {
font-weight: bold;
font-size: 15px;
margin-left: 5px;
}
#TOC ul {
padding-left: 40px;
margin-left: -1.5em;
margin-top: 5px;
margin-bottom: 5px;
}
#TOC ul ul {
margin-left: -2em;
}
#TOC li {
line-height: 16px;
}
table {
margin: 1em auto;
border-width: 1px;
border-color: #DDDDDD;
border-style: outset;
border-collapse: collapse;
}
table th {
border-width: 2px;
padding: 5px;
border-style: inset;
}
table td {
border-width: 1px;
border-style: inset;
line-height: 18px;
padding: 5px 5px;
}
table, table th, table td {
border-left-style: none;
border-right-style: none;
}
table thead, table tr.even {
background-color: #f7f7f7;
}
p {
margin: 0.5em 0;
}
blockquote {
background-color: #f6f6f6;
padding: 0.25em 0.75em;
}
hr {
border-style: solid;
border: none;
border-top: 1px solid #777;
margin: 28px 0;
}
dl {
margin-left: 0;
}
dl dd {
margin-bottom: 13px;
margin-left: 13px;
}
dl dt {
font-weight: bold;
}
ul {
margin-top: 0;
}
ul li {
list-style: circle outside;
}
ul ul {
margin-bottom: 0;
}
pre, code {
background-color: #f7f7f7;
border-radius: 3px;
color: #333;
white-space: pre-wrap; 
}
pre {
border-radius: 3px;
margin: 5px 0px 10px 0px;
padding: 10px;
}
pre:not([class]) {
background-color: #f7f7f7;
}
code {
font-family: Consolas, Monaco, 'Courier New', monospace;
font-size: 85%;
}
p > code, li > code {
padding: 2px 0px;
}
div.figure {
text-align: center;
}
img {
background-color: #FFFFFF;
padding: 2px;
border: 1px solid #DDDDDD;
border-radius: 3px;
border: 1px solid #CCCCCC;
margin: 0 5px;
}
h1 {
margin-top: 0;
font-size: 35px;
line-height: 40px;
}
h2 {
border-bottom: 4px solid #f7f7f7;
padding-top: 10px;
padding-bottom: 2px;
font-size: 145%;
}
h3 {
border-bottom: 2px solid #f7f7f7;
padding-top: 10px;
font-size: 120%;
}
h4 {
border-bottom: 1px solid #f7f7f7;
margin-left: 8px;
font-size: 105%;
}
h5, h6 {
border-bottom: 1px solid #ccc;
font-size: 105%;
}
a {
color: #0033dd;
text-decoration: none;
}
a:hover {
color: #6666ff; }
a:visited {
color: #800080; }
a:visited:hover {
color: #BB00BB; }
a[href^="http:"] {
text-decoration: underline; }
a[href^="https:"] {
text-decoration: underline; }

code > span.kw { color: #555; font-weight: bold; } 
code > span.dt { color: #902000; } 
code > span.dv { color: #40a070; } 
code > span.bn { color: #d14; } 
code > span.fl { color: #d14; } 
code > span.ch { color: #d14; } 
code > span.st { color: #d14; } 
code > span.co { color: #888888; font-style: italic; } 
code > span.ot { color: #007020; } 
code > span.al { color: #ff0000; font-weight: bold; } 
code > span.fu { color: #900; font-weight: bold; } 
code > span.er { color: #a61717; background-color: #e3d2d2; } 
</style>




</head>

<body>




<h1 class="title toc-ignore">Introduction to the R3port package</h1>
<h4 class="author">Richard Hooijmaijers</h4>
<h4 class="date">2023-09-22</h4>



<div id="introduction" class="section level1">
<h1>Introduction</h1>
<p>The R3port package is developed to easily create pdf or html reports
including tables, listings and plots created in R. The reporting idea
was initiated within the context of clinical research, where listings
for pharmacokinetics and safety are generated. The package was set up
such that it is generic enough to be used in other fields too.</p>
<p>The main options to create reports in R are <code>knitr</code> or
<code>rmarkdown</code>. These packages are perfect for writing small to
medium sized documents. Especially when you want to add code, plots or
tables to help tell the story. There are however times when you’re
working in an R script and just want to see how a table or plot look
like in a browser or pdf. Also when someone else writes the report or it
has relatively little R results, knitr or rmarkdown might not be the
best option There are simple options like <code>png()</code> and
<code>pdf()</code> or more advanced within packages like
<code>xtable</code>. With packages like <code>tables</code>,
<code>greport</code>, <code>rapport</code> or <code>startgazer</code>
you can also directly create (full) reports including R results. But I
believe there is a gap between lower level flexibility and the more
specialized packages Within this vignette I will try to explain my
preferred workflow (as simple as possible) and how I implemented it in
the package. To demonstrate the usage of the package the tips dataset
from the reshape2 package was used as this dataset has a nice
combination of numerical and discrete values:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="fu">library</span>(R3port)</span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a><span class="fu">library</span>(reshape2)</span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a><span class="fu">data</span>(tips)</span>
<span id="cb1-4"><a href="#cb1-4" tabindex="-1"></a>tips<span class="sc">$</span>day <span class="ot">&lt;-</span> <span class="fu">factor</span>(tips<span class="sc">$</span>day,<span class="at">levels=</span><span class="fu">c</span>(<span class="st">&quot;Thur&quot;</span>,<span class="st">&quot;Fri&quot;</span>,<span class="st">&quot;Sat&quot;</span>,<span class="st">&quot;Sun&quot;</span> ),<span class="at">ordered =</span> <span class="cn">TRUE</span>)</span>
<span id="cb1-5"><a href="#cb1-5" tabindex="-1"></a><span class="fu">head</span>(tips)</span></code></pre></div>
<pre><code>##   total_bill  tip    sex smoker day   time size
## 1      16.99 1.01 Female     No Sun Dinner    2
## 2      10.34 1.66   Male     No Sun Dinner    3
## 3      21.01 3.50   Male     No Sun Dinner    3
## 4      23.68 3.31   Male     No Sun Dinner    2
## 5      24.59 3.61 Female     No Sun Dinner    4
## 6      25.29 4.71   Male     No Sun Dinner    4</code></pre>
</div>
<div id="calculation-functions" class="section level1">
<h1>Calculation functions</h1>
<p>The package includes a few simple calculation functions. Say we want
to know basic statistics for the total bill per gender, day of the week
and time of day. the following can be done to achieve this:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a>tbl1 <span class="ot">&lt;-</span> <span class="fu">means</span>(tips,<span class="at">variable=</span><span class="st">&quot;total_bill&quot;</span>,<span class="at">by=</span><span class="fu">c</span>(<span class="st">&quot;sex&quot;</span>,<span class="st">&quot;day&quot;</span>,<span class="st">&quot;time&quot;</span>),<span class="at">total=</span><span class="st">&quot;sex&quot;</span>)</span>
<span id="cb3-2"><a href="#cb3-2" tabindex="-1"></a><span class="fu">head</span>(tbl1,<span class="dv">20</span>)</span></code></pre></div>
<pre><code>##       sex  day   time statistic value
## 1  Female Thur Dinner         N     1
## 2  Female Thur  Lunch         N    31
## 3  Female  Fri Dinner         N     5
## 4  Female  Fri  Lunch         N     4
## 5  Female  Sat Dinner         N    28
## 6  Female  Sun Dinner         N    18
## 7    Male Thur  Lunch         N    30
## 8    Male  Fri Dinner         N     7
## 9    Male  Fri  Lunch         N     3
## 10   Male  Sat Dinner         N    59
## 11   Male  Sun Dinner         N    58
## 12  Total Thur Dinner         N     1
## 13  Total Thur  Lunch         N    61
## 14  Total  Fri Dinner         N    12
## 15  Total  Fri  Lunch         N     7
## 16  Total  Sat Dinner         N    87
## 17  Total  Sun Dinner         N    76
## 18 Female Thur Dinner      Mean 18.78
## 19 Female Thur  Lunch      Mean 16.65
## 20 Female  Fri Dinner      Mean 14.31</code></pre>
<p>The function above calculates a standard set of descriptive
statistics frequently used in reporting clinical results. Also it places
the results in a long format data frame (for easy processing in the
other functions). There are some options for calculation of totals and
number of digits in output but mainly it uses plyr to do the work. For
this reason a predefined set of statisitcs was chosen as it is quite
easy to calculate other statistics just using plyr.</p>
<p>Using a similar function, the frequencies within a data frame can be
calculated. Let’s say we want to know the frequencies of each gender,
day of the week and time of day within the data frame. Something like
the following can be used:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a>tbl2       <span class="ot">&lt;-</span> <span class="fu">freq</span>(tips,<span class="at">vars=</span><span class="fu">c</span>(<span class="st">&quot;sex&quot;</span>,<span class="st">&quot;day&quot;</span>,<span class="st">&quot;time&quot;</span>),<span class="at">total=</span><span class="fu">c</span>(<span class="st">&quot;sex&quot;</span>,<span class="st">&quot;day&quot;</span>),<span class="at">spacechar =</span> <span class="st">&quot;~&quot;</span>)</span>
<span id="cb5-2"><a href="#cb5-2" tabindex="-1"></a><span class="fu">head</span>(tbl2)</span></code></pre></div>
<pre><code>##      sex  day   time dnm Freq  Perc   FreqPerc
## 1 Female Thur Dinner 244    1  0.41  1~~(0.41)
## 2 Female Thur  Lunch 244   31 12.70 31~(12.70)
## 3 Female  Fri Dinner 244    5  2.05  5~~(2.05)
## 4 Female  Fri  Lunch 244    4  1.64  4~~(1.64)
## 5 Female  Sat Dinner 244   28 11.48 28~(11.48)
## 6 Female  Sun Dinner 244   18  7.38  18~(7.38)</code></pre>
<p>In general the base of the function is the default <code>table</code>
within R. Although percentages are also given. Options are available for
the denominator, calculation of totals and taking duplicates into
account. This was mainly inspired by clinical safety analyses.</p>
</div>
<div id="the-doc-functions" class="section level1">
<h1>The doc functions</h1>
<p>The package has two sets of functions to create documents in either
tex (and pdf) or html format. The doc functions <code>ltx_doc</code> and
<code>html_doc</code> are quite generic in the sense that any kind of
character vector can be included. This means simple text can be added to
a document or the output of functions that can create TeX/html coding.
The following example demonstrates how it works</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a><span class="fu">ltx_doc</span>(<span class="st">&quot;This is just some </span><span class="sc">\\</span><span class="st">emph{text}&quot;</span>)</span></code></pre></div>
<pre><code>## \documentclass{article}
## \usepackage[ landscape,a4paper,top=1in, bottom=1.2in, left=0.75in, right=0.75in]{geometry}
## \usepackage{graphicx,longtable,amsfonts,booktabs,fancyhdr,lastpage,hyperref,bookmark,caption,listings,float}
## \usepackage[figuresleft]{rotating}
## \setlength\parindent{0pt}
## \setlength{\LTleft}{0pt}
## \setlength{\LTcapwidth}{8in}
## \pagestyle{fancy}
## \renewcommand{\headrulewidth}{0.4pt}
## \renewcommand{\footrulewidth}{0.4pt}
## \cfoot{}\rfoot{}\lhead{\today}\rhead{\thepage\ of \pageref{LastPage}}
## \makeatletter \renewcommand*\l@table{\@dottedtocline{1}{1.5em}{6em}} \makeatother
## \makeatletter \renewcommand*\l@figure{\@dottedtocline{1}{1.5em}{6em}} \makeatother
## \begin{document}
## This is just some \emph{text}
## \end{document}</code></pre>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" tabindex="-1"></a><span class="fu">html_doc</span>(<span class="st">&quot;This is just some &lt;em&gt;text&lt;/em&gt;&quot;</span>)</span></code></pre></div>
<pre><code>## &lt;!DOCTYPE html&gt;
## &lt;html&gt;
## &lt;title&gt; report &lt;/title&gt;
## &lt;head&gt;
##   &lt;link rel=&#39;stylesheet&#39; href=&#39;style.css&#39; type=&#39;text/css&#39;&gt;
## &lt;/head&gt;
## &lt;body&gt;
## This is just some &lt;em&gt;text&lt;/em&gt;
## &lt;/body&gt;</code></pre>
<p>At first sight it might seem that there is little added value in the
above function, however it’s also possible to output the results of
<code>xtable</code> or similar packages. Combine this with an output
statement and you can directly see the compiled pdf (or tex if you like)
which is opened by default. The same is goes for the html but without
compilation. The next example demonstrates this. The resulting html and
pdf files for this and all subsequent examples are available in the
links below the code block. Also in some examples the html version is
not displayed but works almost the same as the latex version.</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" tabindex="-1"></a><span class="fu">library</span>(xtable)</span>
<span id="cb11-2"><a href="#cb11-2" tabindex="-1"></a>xtbl     <span class="ot">&lt;-</span> <span class="fu">means</span>(tips,<span class="at">variable=</span><span class="st">&quot;total_bill&quot;</span>,<span class="at">by=</span><span class="fu">c</span>(<span class="st">&quot;day&quot;</span>))</span>
<span id="cb11-3"><a href="#cb11-3" tabindex="-1"></a>xtbl_ltx <span class="ot">&lt;-</span> <span class="fu">print</span>(<span class="fu">xtable</span>(xtbl),<span class="at">print.results=</span><span class="cn">FALSE</span>)</span>
<span id="cb11-4"><a href="#cb11-4" tabindex="-1"></a><span class="fu">ltx_doc</span>(xtbl_ltx,<span class="at">out=</span><span class="st">&quot;out1.tex&quot;</span>)</span>
<span id="cb11-5"><a href="#cb11-5" tabindex="-1"></a></span>
<span id="cb11-6"><a href="#cb11-6" tabindex="-1"></a>xtbl_html <span class="ot">&lt;-</span> <span class="fu">print</span>(<span class="fu">xtable</span>(xtbl),<span class="at">print.results=</span><span class="cn">FALSE</span>,<span class="at">type=</span><span class="st">&quot;html&quot;</span>, <span class="at">html.table.attributes =</span> <span class="st">&quot;class=table&quot;</span>)</span>
<span id="cb11-7"><a href="#cb11-7" tabindex="-1"></a><span class="fu">html_doc</span>(xtbl_html,<span class="at">out=</span><span class="st">&quot;out1.html&quot;</span>,</span>
<span id="cb11-8"><a href="#cb11-8" tabindex="-1"></a>         <span class="at">css=</span><span class="st">&quot;https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css&quot;</span>)</span></code></pre></div>
<p><a target="_blank" href="http://richardhooijmaijers.github.io/R3port/out1.pdf">out1.pdf</a><br />
<a target="_blank" href="http://richardhooijmaijers.github.io/R3port/out1.html">out1.html</a></p>
</div>
<div id="the-list-functions" class="section level1">
<h1>The list functions</h1>
<p>With the list functions you can directly output a data frame without
using xtable. The function is intended to display a data frame a bit
more attractive. Within the following example the header is be adapted
and the variables are grouped and ordered. Furthermore a title, footnote
and column width is adapted</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" tabindex="-1"></a>lst1 <span class="ot">&lt;-</span> <span class="fu">means</span>(tips,<span class="at">variable=</span><span class="st">&quot;tip&quot;</span>,<span class="at">by=</span><span class="fu">c</span>(<span class="st">&quot;sex&quot;</span>,<span class="st">&quot;day&quot;</span>),<span class="at">pack=</span><span class="dv">2</span>)</span>
<span id="cb12-2"><a href="#cb12-2" tabindex="-1"></a>lst2 <span class="ot">&lt;-</span> <span class="fu">means</span>(tips,<span class="at">variable=</span><span class="st">&quot;total_bill&quot;</span>,<span class="at">by=</span><span class="fu">c</span>(<span class="st">&quot;sex&quot;</span>,<span class="st">&quot;day&quot;</span>),<span class="at">pack=</span><span class="dv">2</span>)</span>
<span id="cb12-3"><a href="#cb12-3" tabindex="-1"></a>lst  <span class="ot">&lt;-</span> <span class="fu">merge</span>(lst1,lst2,<span class="at">by=</span><span class="fu">c</span>(<span class="st">&quot;sex&quot;</span>,<span class="st">&quot;day&quot;</span>,<span class="st">&quot;statistic&quot;</span>))</span>
<span id="cb12-4"><a href="#cb12-4" tabindex="-1"></a><span class="fu">names</span>(lst)[<span class="dv">4</span><span class="sc">:</span><span class="dv">5</span>] <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;tip&quot;</span>,<span class="st">&quot;Total Bill&quot;</span>)</span>
<span id="cb12-5"><a href="#cb12-5" tabindex="-1"></a></span>
<span id="cb12-6"><a href="#cb12-6" tabindex="-1"></a><span class="fu">ltx_list</span>(lst,<span class="at">vargroup=</span><span class="fu">c</span>(<span class="st">&quot;&quot;</span>,<span class="st">&quot;&quot;</span>,<span class="st">&quot;&quot;</span>,<span class="st">&quot;income&quot;</span>,<span class="st">&quot;income&quot;</span>),<span class="at">group =</span> <span class="dv">2</span>, <span class="at">title=</span><span class="st">&quot;a listing&quot;</span>,</span>
<span id="cb12-7"><a href="#cb12-7" tabindex="-1"></a>         <span class="at">fill=</span><span class="st">&quot;-&quot;</span>,<span class="at">footnote=</span><span class="st">&quot;a footnote&quot;</span>,<span class="at">mancol=</span><span class="st">&quot;p{3cm}llll&quot;</span>,<span class="at">out=</span><span class="st">&quot;out2.tex&quot;</span>)</span></code></pre></div>
<p>An html document can be created quite similar, with the exception of
the column width option</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" tabindex="-1"></a><span class="fu">html_list</span>(lst,<span class="at">vargroup=</span><span class="fu">c</span>(<span class="st">&quot;&quot;</span>,<span class="st">&quot;&quot;</span>,<span class="st">&quot;&quot;</span>,<span class="st">&quot;income&quot;</span>,<span class="st">&quot;income&quot;</span>),<span class="at">group =</span> <span class="dv">2</span>,<span class="at">title=</span><span class="st">&quot;a listing&quot;</span>,</span>
<span id="cb13-2"><a href="#cb13-2" tabindex="-1"></a>          <span class="at">fill=</span><span class="st">&quot;-&quot;</span>,<span class="at">footnote=</span><span class="st">&quot;a footnote&quot;</span>,<span class="at">out=</span><span class="st">&quot;out2.html&quot;</span>)</span></code></pre></div>
<p><a target="_blank" href="http://richardhooijmaijers.github.io/R3port/out2.pdf">out2.pdf</a><br />
<a target="_blank" href="http://richardhooijmaijers.github.io/R3port/out2.html">out2.html</a></p>
</div>
<div id="the-table-functions" class="section level1">
<h1>The table functions</h1>
<p>The most comprehensive functions are <code>ltx_table</code> and
<code>html_table</code>. With these functions it is possible to reshape
the data before presenting the results. This can make the results easier
to read and offers the possibility to tweak the table header. Because
the data is transposed to a wide format it is important to keep the
results “unique”. Read more about aggregating in
<code>reshape2::dcast</code> which is used in this function.The
following example demonstrates a common usage of the function:</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" tabindex="-1"></a><span class="fu">ltx_table</span>(tbl1,<span class="at">x=</span><span class="fu">c</span>(<span class="st">&quot;sex&quot;</span>,<span class="st">&quot;statistic&quot;</span>),<span class="at">y=</span><span class="fu">c</span>(<span class="st">&quot;day&quot;</span>,<span class="st">&quot;time&quot;</span>),<span class="at">var=</span><span class="st">&quot;value&quot;</span>,</span>
<span id="cb14-2"><a href="#cb14-2" tabindex="-1"></a>          <span class="at">title=</span><span class="st">&quot;total bill statistics&quot;</span>,<span class="at">xabove=</span><span class="cn">TRUE</span>,<span class="at">out=</span><span class="st">&quot;out3.tex&quot;</span>)</span>
<span id="cb14-3"><a href="#cb14-3" tabindex="-1"></a><span class="fu">html_table</span>(tbl1,<span class="at">x=</span><span class="fu">c</span>(<span class="st">&quot;sex&quot;</span>,<span class="st">&quot;statistic&quot;</span>),<span class="at">y=</span><span class="fu">c</span>(<span class="st">&quot;day&quot;</span>,<span class="st">&quot;time&quot;</span>),<span class="at">var=</span><span class="st">&quot;value&quot;</span>,</span>
<span id="cb14-4"><a href="#cb14-4" tabindex="-1"></a>          <span class="at">title=</span><span class="st">&quot;total bill statistics&quot;</span>,<span class="at">xabove=</span><span class="cn">TRUE</span>,<span class="at">out=</span><span class="st">&quot;out3.html&quot;</span>)</span></code></pre></div>
<p><a target="_blank" href="http://richardhooijmaijers.github.io/R3port/out3.pdf">out3.pdf</a><br />
<a target="_blank" href="http://richardhooijmaijers.github.io/R3port/out3.html">out3.html</a></p>
<p>The xabove option makes it possible to group the data and to save
space. the header has two levels as two variables are selected to cast
the results. Although you can add many levels this way, it is advised to
use no more than three for the sake of readability. Another examples is
presented where labels are added to the data frame and where some common
options are adapted</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" tabindex="-1"></a><span class="fu">attr</span>(tbl2<span class="sc">$</span>sex,<span class="st">&quot;label&quot;</span>) <span class="ot">&lt;-</span> <span class="st">&quot;Gender&quot;</span></span>
<span id="cb15-2"><a href="#cb15-2" tabindex="-1"></a><span class="fu">attr</span>(tbl2<span class="sc">$</span>day,<span class="st">&quot;label&quot;</span>) <span class="ot">&lt;-</span> <span class="st">&quot;Day of the week&quot;</span></span>
<span id="cb15-3"><a href="#cb15-3" tabindex="-1"></a><span class="fu">ltx_table</span>(tbl2,<span class="at">x=</span><span class="fu">c</span>(<span class="st">&quot;sex&quot;</span>,<span class="st">&quot;day&quot;</span>),<span class="at">y=</span><span class="fu">c</span>(<span class="st">&quot;time&quot;</span>),<span class="at">var=</span><span class="st">&quot;FreqPerc&quot;</span>,<span class="at">yhead =</span> <span class="cn">TRUE</span>,<span class="at">size=</span><span class="st">&quot;</span><span class="sc">\\</span><span class="st">normalsize&quot;</span>,</span>
<span id="cb15-4"><a href="#cb15-4" tabindex="-1"></a>          <span class="at">title=</span><span class="st">&quot;customer frequency&quot;</span>,<span class="at">xabove=</span><span class="cn">TRUE</span>,<span class="at">out=</span><span class="st">&quot;out4.tex&quot;</span>,<span class="at">group=</span><span class="dv">1</span>,<span class="at">mancol=</span><span class="st">&quot;lllll&quot;</span>,</span>
<span id="cb15-5"><a href="#cb15-5" tabindex="-1"></a>          <span class="at">template=</span><span class="fu">paste0</span>(<span class="fu">system.file</span>(<span class="at">package =</span>  <span class="st">&quot;R3port&quot;</span>), <span class="st">&quot;/listing.tex&quot;</span>))</span></code></pre></div>
<p><a target="_blank" href="http://richardhooijmaijers.github.io/R3port/out4.pdf">out4.pdf</a></p>
<p>With a bit of fantasy you can make combinations like this for
instance:</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" tabindex="-1"></a><span class="fu">library</span>(plyr)</span>
<span id="cb16-2"><a href="#cb16-2" tabindex="-1"></a>tbl3           <span class="ot">&lt;-</span> <span class="fu">freq</span>(tips,<span class="fu">c</span>(<span class="st">&quot;sex&quot;</span>,<span class="st">&quot;day&quot;</span>,<span class="st">&quot;time&quot;</span>),<span class="at">total=</span><span class="fu">c</span>(<span class="st">&quot;day&quot;</span>,<span class="st">&quot;time&quot;</span>),<span class="at">spacechar =</span> <span class="st">&quot;~&quot;</span>)</span>
<span id="cb16-3"><a href="#cb16-3" tabindex="-1"></a>tbl3<span class="sc">$</span>statistic <span class="ot">&lt;-</span> <span class="fu">factor</span>(<span class="st">&quot;N (perc)&quot;</span>)</span>
<span id="cb16-4"><a href="#cb16-4" tabindex="-1"></a>tbl3<span class="sc">$</span>value     <span class="ot">&lt;-</span> tbl3<span class="sc">$</span>FreqPerc</span>
<span id="cb16-5"><a href="#cb16-5" tabindex="-1"></a>tbl3           <span class="ot">&lt;-</span> <span class="fu">rbind.fill</span>(tbl1,tbl3)</span>
<span id="cb16-6"><a href="#cb16-6" tabindex="-1"></a><span class="fu">ltx_table</span>(tbl3,<span class="at">x=</span><span class="fu">c</span>(<span class="st">&quot;sex&quot;</span>,<span class="st">&quot;day&quot;</span>),<span class="at">y=</span><span class="fu">c</span>(<span class="st">&quot;time&quot;</span>,<span class="st">&quot;statistic&quot;</span>),<span class="at">var=</span><span class="st">&quot;value&quot;</span>,<span class="at">convchar =</span> <span class="cn">TRUE</span>,</span>
<span id="cb16-7"><a href="#cb16-7" tabindex="-1"></a>          <span class="at">title=</span><span class="st">&quot;total bill statistics&quot;</span>,<span class="at">xabove=</span><span class="cn">TRUE</span>,<span class="at">out=</span><span class="st">&quot;out5.tex&quot;</span>,</span>
<span id="cb16-8"><a href="#cb16-8" tabindex="-1"></a>          <span class="at">mancol=</span><span class="fu">paste</span>(<span class="fu">rep</span>(<span class="st">&quot;l&quot;</span>,<span class="dv">16</span>),<span class="at">collapse=</span><span class="st">&quot;&quot;</span>),</span>
<span id="cb16-9"><a href="#cb16-9" tabindex="-1"></a>          <span class="at">template=</span><span class="fu">paste0</span>(<span class="fu">system.file</span>(<span class="at">package =</span>  <span class="st">&quot;R3port&quot;</span>), <span class="st">&quot;/listing.tex&quot;</span>))</span></code></pre></div>
<p><a target="_blank" href="http://richardhooijmaijers.github.io/R3port/out5.pdf">out5.pdf</a></p>
</div>
<div id="graphical-output" class="section level1">
<h1>Graphical output</h1>
<p>The graphical output system is basically the same as for the tables
and listings. The only difference is that the figures are also saved as
png or pdf files. Then they are referenced in the tex or html file, and
if selected compiled. Using grid graphics is the easiest because you can
just place the plot in an object and pass it to the functions. The way
base plots can be used is by placing it in a function. Some examples are
given below:</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" tabindex="-1"></a><span class="co"># Used lwidth to ensure correct width in beamer presentations</span></span>
<span id="cb17-2"><a href="#cb17-2" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb17-3"><a href="#cb17-3" tabindex="-1"></a>pl <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(tips,<span class="fu">aes</span>(<span class="at">x=</span>day,<span class="at">y=</span>total_bill)) <span class="sc">+</span> <span class="fu">geom_boxplot</span>()</span>
<span id="cb17-4"><a href="#cb17-4" tabindex="-1"></a><span class="fu">ltx_plot</span>(pl,<span class="at">out=</span><span class="st">&quot;out6.tex&quot;</span>,<span class="at">titlepr =</span> <span class="st">&quot;plot A&quot;</span>,</span>
<span id="cb17-5"><a href="#cb17-5" tabindex="-1"></a>         <span class="at">title=</span><span class="st">&quot;example for basic plotting&quot;</span>,<span class="at">lwidth=</span><span class="st">&quot;0.9</span><span class="sc">\\</span><span class="st">linewidth&quot;</span>)</span>
<span id="cb17-6"><a href="#cb17-6" tabindex="-1"></a><span class="fu">html_plot</span>(pl,<span class="at">out=</span><span class="st">&quot;out6.html&quot;</span>,<span class="at">titlepr =</span> <span class="st">&quot;plot A&quot;</span>,</span>
<span id="cb17-7"><a href="#cb17-7" tabindex="-1"></a>          <span class="at">title=</span><span class="st">&quot;example for basic plotting&quot;</span>)</span>
<span id="cb17-8"><a href="#cb17-8" tabindex="-1"></a></span>
<span id="cb17-9"><a href="#cb17-9" tabindex="-1"></a><span class="co"># you can output a list of plots e.g:</span></span>
<span id="cb17-10"><a href="#cb17-10" tabindex="-1"></a>pl <span class="ot">&lt;-</span> <span class="fu">lapply</span>(<span class="fu">unique</span>(tips<span class="sc">$</span>sex),<span class="cf">function</span>(x){</span>
<span id="cb17-11"><a href="#cb17-11" tabindex="-1"></a>  <span class="fu">ggplot</span>(tips[tips<span class="sc">$</span>sex<span class="sc">==</span>x,],<span class="fu">aes</span>(time,total_bill)) <span class="sc">+</span> <span class="fu">geom_boxplot</span>() <span class="sc">+</span></span>
<span id="cb17-12"><a href="#cb17-12" tabindex="-1"></a>    <span class="fu">facet_wrap</span>(<span class="sc">~</span>day) <span class="sc">+</span> <span class="fu">ggtitle</span>(x)</span>
<span id="cb17-13"><a href="#cb17-13" tabindex="-1"></a>})</span>
<span id="cb17-14"><a href="#cb17-14" tabindex="-1"></a><span class="fu">ltx_plot</span>(pl,<span class="at">out=</span><span class="st">&quot;out7.tex&quot;</span>,<span class="at">titlepr =</span> <span class="st">&quot;plot B&quot;</span>,</span>
<span id="cb17-15"><a href="#cb17-15" tabindex="-1"></a>         <span class="at">title=</span><span class="st">&quot;example for plotting lists&quot;</span>,<span class="at">lwidth=</span><span class="st">&quot;0.9</span><span class="sc">\\</span><span class="st">linewidth&quot;</span>)</span>
<span id="cb17-16"><a href="#cb17-16" tabindex="-1"></a><span class="fu">html_plot</span>(pl,<span class="at">out=</span><span class="st">&quot;out7.html&quot;</span>,<span class="at">titlepr =</span> <span class="st">&quot;plot B&quot;</span>,</span>
<span id="cb17-17"><a href="#cb17-17" tabindex="-1"></a>          <span class="at">title=</span><span class="st">&quot;example for plotting lists&quot;</span>)</span>
<span id="cb17-18"><a href="#cb17-18" tabindex="-1"></a></span>
<span id="cb17-19"><a href="#cb17-19" tabindex="-1"></a><span class="co"># base plots can be used but placed in function:</span></span>
<span id="cb17-20"><a href="#cb17-20" tabindex="-1"></a>bpl <span class="ot">&lt;-</span> <span class="cf">function</span>() <span class="fu">plot</span>(tips<span class="sc">$</span>day,tips<span class="sc">$</span>total_bill)</span>
<span id="cb17-21"><a href="#cb17-21" tabindex="-1"></a><span class="fu">ltx_plot</span>(<span class="fu">bpl</span>(),<span class="at">out=</span><span class="st">&quot;out8.tex&quot;</span>,<span class="at">titlepr =</span> <span class="st">&quot;plot C&quot;</span>,</span>
<span id="cb17-22"><a href="#cb17-22" tabindex="-1"></a>         <span class="at">title=</span><span class="st">&quot;example for base plot&quot;</span>,<span class="at">lwidth=</span><span class="st">&quot;0.9</span><span class="sc">\\</span><span class="st">linewidth&quot;</span>)</span>
<span id="cb17-23"><a href="#cb17-23" tabindex="-1"></a><span class="fu">html_plot</span>(<span class="fu">bpl</span>(),<span class="at">out=</span><span class="st">&quot;out8.html&quot;</span>,<span class="at">titlepr =</span> <span class="st">&quot;plot C&quot;</span>,</span>
<span id="cb17-24"><a href="#cb17-24" tabindex="-1"></a>          <span class="at">title=</span><span class="st">&quot;example for base plot&quot;</span>)</span></code></pre></div>
<p><a target="_blank" href="http://richardhooijmaijers.github.io/R3port/out6.pdf">out6.pdf</a><br />
<a target="_blank" href="http://richardhooijmaijers.github.io/R3port/out6.html">out6.html</a><br />
<a target="_blank" href="http://richardhooijmaijers.github.io/R3port/out7.pdf">out7.pdf</a><br />
<a target="_blank" href="http://richardhooijmaijers.github.io/R3port/out7.html">out7.html</a><br />
<a target="_blank" href="http://richardhooijmaijers.github.io/R3port/out8.pdf">out8.pdf</a><br />
<a target="_blank" href="http://richardhooijmaijers.github.io/R3port/out8.html">out8.html</a></p>
</div>
<div id="putting-it-together" class="section level1">
<h1>Putting it together</h1>
<p>The last thing to after creating the tables listings and plots is to
combine it in an overall document. Here the last two functions will come
in <code>ltx_combine</code> and <code>html_combine</code>. To have a bit
of background on how these functions work we should first look at all
the output that is created. For each table and listing, by default 3
files are generated. For latex output, the tex file, compiled pdf and a
raw tex file. For html only a html and raw html file. In case of
plotting also a figures folder is created with teh plots. The raw files
have only the text/coding for the table or listing. The combine
functions can pick these files up and place it in a combined document.
The combine argument can be used to select files, for instance if you
want to combine a selected set of output.</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" tabindex="-1"></a><span class="fu">ltx_combine</span>(<span class="at">out=</span><span class="st">&quot;comb1.tex&quot;</span>,<span class="at">template=</span><span class="fu">paste0</span>(<span class="fu">system.file</span>(<span class="at">package=</span><span class="st">&quot;R3port&quot;</span>),<span class="st">&quot;/default.tex&quot;</span>))</span>
<span id="cb18-2"><a href="#cb18-2" tabindex="-1"></a><span class="fu">html_combine</span>(<span class="at">out=</span><span class="st">&quot;comb1.html&quot;</span>,<span class="at">toctheme=</span><span class="cn">TRUE</span>,</span>
<span id="cb18-3"><a href="#cb18-3" tabindex="-1"></a>             <span class="at">template=</span><span class="fu">paste0</span>(<span class="fu">system.file</span>(<span class="at">package=</span><span class="st">&quot;R3port&quot;</span>),<span class="st">&quot;/bootstrap.html&quot;</span>))</span></code></pre></div>
<p><a target="_blank" href="http://richardhooijmaijers.github.io/R3port/comb1.pdf">comb1.pdf</a><br />
<a target="_blank" href="http://richardhooijmaijers.github.io/R3port/comb1.html">comb1.html</a></p>
</div>
<div id="the-templates" class="section level1">
<h1>The templates</h1>
<p>You probably noticed that not all output generated has the same
layout. This is controlled by the templates, I didn’t explain the
template argument before because I think it deserves a section of it’s
own. The template system uses <code>whisker</code> to create output in
different styes. A couple of templates are included within the package
to start with, however users can generate their own templates using this
system. The whisker package is set up to provide a template and a list
with variables to render (called rendlist in this package). Provide a
template and a rendlist to create a custom styled output. The included
templates are demonstrated below with the combine functions (but will
work the same for the list, table and plot functions). But if you want
to experiment read further for some details.</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" tabindex="-1"></a>tmpl  <span class="ot">&lt;-</span> <span class="fu">list.files</span>(<span class="fu">system.file</span>(<span class="at">package=</span><span class="st">&quot;R3port&quot;</span>),<span class="at">pattern=</span><span class="st">&quot;</span><span class="sc">\\</span><span class="st">.tex$&quot;</span>,<span class="at">full.names=</span><span class="cn">TRUE</span>)</span>
<span id="cb19-2"><a href="#cb19-2" tabindex="-1"></a><span class="fu">lapply</span>(<span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(tmpl),<span class="cf">function</span>(x){</span>
<span id="cb19-3"><a href="#cb19-3" tabindex="-1"></a>  ppt <span class="ot">&lt;-</span> <span class="fu">ifelse</span>(<span class="fu">grepl</span>(<span class="st">&quot;beamer.tex&quot;</span>,tmpl[x]),<span class="cn">TRUE</span>,<span class="cn">FALSE</span>)</span>
<span id="cb19-4"><a href="#cb19-4" tabindex="-1"></a>  <span class="fu">ltx_combine</span>(<span class="at">out=</span><span class="fu">paste0</span>(<span class="st">&quot;combt&quot;</span>,x,<span class="st">&quot;.tex&quot;</span>),<span class="at">template=</span>tmpl[x],<span class="at">presentation=</span>ppt)</span>
<span id="cb19-5"><a href="#cb19-5" tabindex="-1"></a>})</span></code></pre></div>
<p><a target="_blank" href="http://richardhooijmaijers.github.io/R3port/combt1.pdf">comb1.pdf</a><br />
<a target="_blank" href="http://richardhooijmaijers.github.io/R3port/combt2.pdf">comb2.pdf</a><br />
<a target="_blank" href="http://richardhooijmaijers.github.io/R3port/combt3.pdf">comb3.pdf</a><br />
<a target="_blank" href="http://richardhooijmaijers.github.io/R3port/combt4.pdf">comb4.pdf</a><br />
<a target="_blank" href="http://richardhooijmaijers.github.io/R3port/combt5.pdf">comb5.pdf</a><br /></p>
<div id="create-your-own-template" class="section level2">
<h2>Create your own template</h2>
<p>The way the package handles the rendlist is that certain information
is always added to this list within a function. This is off course
necessary to be able to include the table,list or plot to be created
within the final document. Practically this means that the
<code>rrres</code> tag is always included in the template to place in
the R results to be included. Other special tags include
<code>rrtoc</code>, <code>css</code> and <code>orientation</code>. The
safest way is to not include these tags in rendlist or change this
within the template (or at least be aware of the effect when omitting
tags or placing them elsewhere in the template)</p>
</div>
</div>



<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
